<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Masjid As-Sunnah Hekinan</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          fig: {
            primary: "#0EA5E9",
            primaryDark: "#0284C7",
            accent: "#F59E0B",
            success: "#10B981",
            soft: "#F0F9FF"
          }
        },
        borderRadius: { fig: "20px" },
        boxShadow: { soft: "0 10px 30px rgba(2,132,199,.15)" }
      }
    }
  }
</script>

<style>
  .scrollx-snap{scroll-snap-type:x mandatory}
  .snap-item{scroll-snap-align:start}
  .hide-scrollbar{scrollbar-width:none;-ms-overflow-style:none}
  .hide-scrollbar::-webkit-scrollbar{display:none}

  /* slider tab pengumuman/artikel */
  #tabs{position:relative}
  .tab-slider{
    position:absolute; left:0; top:100%;
    width:50%; height:3px; border-radius:999px;
    background:#0284C7;
    transform:translateY(10px);
    transition:transform .25s ease;
  }
  #tabs.tab-right .tab-slider{transform:translate(100%,10px)}
  #tabs.tab-left .tab-slider{transform:translate(0,10px)}
</style>
</head>

<body class="font-sans text-slate-800 bg-gradient-to-b from-fig-soft to-white">
<header class="sticky top-0 bg-white/80 backdrop-blur border-b border-slate-200 z-40">
  <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
    <a href="#top" class="flex gap-3 items-center">
      <img src="logohekinan.jpeg" class="h-10 w-auto rounded-[12px]" alt="Logo">
      <span class="font-extrabold text-lg md:text-xl">Masjid As-Sunnah Hekinan</span>
    </a>
    <div class="flex items-center gap-3 text-sm">
      <a href="#sholat" class="hover:text-fig-primaryDark flex items-center gap-1"><i data-lucide="moon-star" class="w-4 h-4"></i>Sholat</a>
      <a href="#kegiatan" class="hover:text-fig-primaryDark flex items-center gap-1"><i data-lucide="images" class="w-4 h-4"></i>Kegiatan</a>
      <a href="#kajian" class="hover:text-fig-primaryDark flex items-center gap-1"><i data-lucide="video" class="w-4 h-4"></i>Kajian</a>
      <a href="#info" class="hover:text-fig-primaryDark flex items-center gap-1"><i data-lucide="layers" class="w-4 h-4"></i>Info</a>
      <a href="#donasi" class="rounded-[20px] bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-2 font-semibold shadow">Donasi</a>
      <button id="openData" class="admin-only hidden rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark flex items-center gap-2">
        <i data-lucide="settings-2" class="w-4 h-4"></i>⚙️ Data
      </button>
    </div>
  </nav>
</header>

<!-- ================== JADWAL SHOLAT ================== -->
<section id="sholat" class="container mx-auto px-4 py-10">
  <div class="rounded-[20px] border border-slate-200 bg-white p-6 shadow">
    <div class="flex items-center justify-between gap-4">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center gap-3">
        <i data-lucide="moon-star" class="text-fig-primaryDark"></i>Jadwal Sholat (berdasarkan lokasi Anda)
      </h2>
      <button id="refreshSholat" class="rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark" title="Refresh">⟳</button>
    </div>
    <div id="sholatGrid" class="mt-6 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3"></div>
    <p class="mt-3 text-xs text-slate-500">Waktu mengikuti zona perangkat Anda.</p>
  </div>
</section>

<!-- ================== KAJIAN TERBARU ================== -->
<section id="kajian" class="container mx-auto px-4 py-10">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl md:text-3xl font-extrabold flex items-center gap-3">
      <i data-lucide="video" class="text-fig-accent"></i>Kajian Terbaru
    </h2>
    <a href="kajian.html" class="text-sm font-semibold text-fig-primaryDark hover:underline inline-flex items-center gap-2">
      Lihat semua <i data-lucide="arrow-right" class="w-4 h-4"></i>
    </a>
  </div>
  <div id="kajianLatestList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  <p id="kajianLatestEmpty" class="hidden text-sm text-slate-500">Belum ada kajian yang akan datang.</p>
  <p class="mt-3 text-xs text-slate-500">Data kajian bisa diambil dari Google Sheet (CSV). Anda dapat mengaturnya lewat tombol ⚙️ Data (khusus admin).</p>
</section>

<!-- ================== KEGIATAN ================== -->
<section id="kegiatan" class="bg-white border-y border-slate-200/70">
  <div class="container mx-auto px-4 py-10">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center gap-3">
        <i data-lucide="images" class="text-fig-accent"></i>Kegiatan
      </h2>
      <div class="hidden md:flex items-center gap-2">
        <button id="kgPrev" class="rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark">◀</button>
        <button id="kgNext" class="rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark">▶</button>
      </div>
    </div>

    <div class="rounded-[20px] border border-slate-200 bg-white p-5 shadow mb-6">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-extrabold flex items-center gap-2">
          <i data-lucide="calendar-clock" class="text-fig-success"></i>Kegiatan Terdekat
        </h3>
        <a href="kegiatan.html" class="text-sm font-semibold text-fig-primaryDark hover:underline inline-flex items-center gap-2">
          Detail <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </a>
      </div>
      <div id="kegiatanUpcomingList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4"></div>
      <p id="kegiatanUpcomingEmpty" class="hidden text-sm text-slate-500 mt-2">Belum ada agenda kegiatan terdekat.</p>
      <p class="text-xs text-slate-500 mt-2">Catatan: Galeri foto tetap manual di halaman Kegiatan, sedangkan “Kegiatan Terdekat” ini berasal dari Google Sheet (opsional).</p>
    </div>

    <div class="relative">
      <div id="kgTrack" class="scrollx-snap hide-scrollbar flex gap-4 overflow-x-auto rounded-[20px] border border-slate-200 p-4">
        <!-- Jika Anda punya foto kegiatan, taruh file di repo dan ubah src di bawah ini -->
        <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
          <img src="./1.jpeg" class="w-full h-full object-cover" alt="Kegiatan 1">
        </figure>
        <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
          <img src="./2.jpeg" class="w-full h-full object-cover" alt="Kegiatan 2">
        </figure>
        <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
          <img src="./3.jpeg" class="w-full h-full object-cover" alt="Kegiatan 3">
        </figure>
      </div>
      <div class="md:hidden flex justify-end gap-2 mt-3">
        <button id="kgPrevMob" class="rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark">◀</button>
        <button id="kgNextMob" class="rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark">▶</button>
      </div>
    </div>
    <p class="mt-4 text-center text-xs text-slate-500">Geser kiri/kanan atau pakai tombol ◀ ▶.</p>
  </div>
</section>

<!-- ================== INFO (PENGUMUMAN & ARTIKEL) ================== -->
<section id="info" class="container mx-auto px-4 py-10">
  <div id="tabs" class="relative tab-left">
    <div class="flex gap-2">
      <button id="tabPengumuman" class="flex-1 rounded-[12px] px-4 py-3 font-semibold border border-slate-300 bg-slate-50">Pengumuman</button>
      <button id="tabArtikel" class="flex-1 rounded-[12px] px-4 py-3 font-semibold border border-slate-300 bg-slate-50">Artikel</button>
    </div>
    <span class="tab-slider"></span>
  </div>

  <div id="wrapPengumuman" class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  <p id="boardEmpty" class="hidden text-sm text-slate-500">Belum ada pengumuman.</p>

  <div id="wrapArtikel" class="mt-6 hidden">
    <div class="flex justify-end">
      <div class="relative">
        <i data-lucide="search" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
        <input id="searchArtikel" type="search" placeholder="Cari artikel..."
               class="w-full rounded-[12px] border border-slate-300 pl-10 pr-3 py-2 focus:border-fig-primary text-sm w-64 max-w-full">
      </div>
    </div>
    <div id="wrapArtikel" class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    <p id="artikelEmpty" class="hidden text-sm text-slate-500">Belum ada artikel.</p>
  </div>
</section>

<!-- ================== DONASI ================== -->
<section id="donasi" class="container mx-auto px-4 pb-12">
  <h2 class="text-2xl font-extrabold mb-4 flex items-center gap-3">
    <i data-lucide="heart-handshake" class="text-fig-success"></i>Progres Donasi
  </h2>

  <div class="rounded-[20px] border border-slate-200 bg-fig-soft p-6 shadow">
    <div class="flex justify-between items-end">
      <div>
        <p class="text-sm text-slate-600">Terkumpul</p>
        <p id="terkumpulLabel" class="text-3xl font-bold">JPY 0</p>
      </div>
      <div class="text-right">
        <p class="text-sm text-slate-600">Target</p>
        <p id="targetLabel" class="text-2xl font-bold">JPY 0</p>
      </div>
    </div>

    <div class="mt-4 w-full bg-white rounded-full border border-slate-200 overflow-hidden">
      <div id="progressBar" class="h-3 w-0 bg-fig-primary"></div>
    </div>
    <p class="mt-2 text-sm text-slate-600"><span id="percentLabel">0</span>% tercapai</p>

    <div class="mt-6 rounded-[20px] border border-slate-200 bg-white p-5">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div>
          <label class="text-sm font-semibold">Nominal (JPY)</label>
          <input id="inputJPY" type="number" min="1000" step="1000" placeholder="Masukkan JPY"
                 class="mt-1 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
          <div class="mt-2 flex flex-wrap gap-2 text-xs">
            <button class="quick-jpy border rounded-[12px] px-3 py-1" data-v="1000">1.000</button>
            <button class="quick-jpy border rounded-[12px] px-3 py-1" data-v="5000">5.000</button>
            <button class="quick-jpy border rounded-[12px] px-3 py-1" data-v="10000">10.000</button>
            <button class="quick-jpy border rounded-[12px] px-3 py-1" data-v="20000">20.000</button>
          </div>
        </div>
        <div>
          <label class="text-sm font-semibold">Nominal (IDR)</label>
          <input id="inputIDR" type="number" min="10000" step="1000" placeholder="Masukkan IDR"
                 class="mt-1 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
          <p class="text-xs text-slate-500 mt-2">Konversi otomatis (kurs contoh di app.js).</p>
        </div>
      </div>
      <div class="mt-4 flex justify-end">
        <button id="donasiBtn" class="rounded-[12px] bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-2 font-semibold shadow">
          Saya ingin berdonasi
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Modal admin -->
<div id="dataModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4 z-50">
  <div class="w-full max-w-2xl rounded-[20px] bg-white p-6 shadow">
    <div class="flex items-start justify-between gap-4">
      <h3 class="text-lg font-extrabold text-slate-900 flex items-center gap-2">
        <i data-lucide="database" class="w-5 h-5"></i> Sumber Data (Google Sheet CSV)
      </h3>
      <button id="closeData" class="text-slate-500 hover:text-slate-700" aria-label="Tutup">✕</button>
    </div>

    <div class="grid md:grid-cols-2 gap-4 mt-4">
      <div class="rounded-[16px] border border-slate-200 p-4">
        <label class="text-sm font-semibold">CSV Pengumuman</label>
        <input id="csvPengumuman" type="url" placeholder="https://docs.google.com/.../pub?output=csv"
               class="mt-2 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
        <p class="text-xs text-slate-500 mt-2">Kolom minimal: <span class="font-mono">title,date,desc,link</span></p>
      </div>

      <div class="rounded-[16px] border border-slate-200 p-4">
        <label class="text-sm font-semibold">CSV Artikel</label>
        <input id="csvArtikel" type="url" placeholder="https://docs.google.com/.../pub?output=csv"
               class="mt-2 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
        <p class="text-xs text-slate-500 mt-2">Kolom minimal: <span class="font-mono">title,tag,excerpt,link</span></p>
      </div>

      <div class="rounded-[16px] border border-slate-200 p-4">
        <label class="text-sm font-semibold">CSV Kajian</label>
        <input id="csvKajian" type="url" placeholder="https://docs.google.com/.../pub?output=csv"
               class="mt-2 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
        <p class="text-xs text-slate-500 mt-2">Kolom minimal: <span class="font-mono">tanggal,waktu,judul,pemateri,platform,link,poster,catatan,status</span></p>
      </div>

      <div class="rounded-[16px] border border-slate-200 p-4">
        <label class="text-sm font-semibold">CSV Kegiatan (Agenda)</label>
        <input id="csvKegiatan" type="url" placeholder="(opsional) https://docs.google.com/.../pub?output=csv"
               class="mt-2 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary"/>
        <p class="text-xs text-slate-500 mt-2">Kolom minimal: <span class="font-mono">tanggal,waktu,title,lokasi,pemateri,desc,poster,link,status</span></p>
      </div>
    </div>

    <div class="mt-4 flex justify-end">
      <button id="saveData" class="rounded-[12px] bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-2 text-sm font-semibold shadow">
        Simpan
      </button>
    </div>

    <p class="text-xs text-slate-500 mt-3">
      Tips: untuk gambar poster, Anda bisa pakai URL file di GitHub Pages (folder <span class="font-mono">assets/</span>) atau link publik Google Drive.
    </p>
  </div>
</div>

<footer class="bg-white border-t border-slate-200">
  <div class="container mx-auto px-4 py-10 text-center text-sm text-slate-500">
    © <span id="year"></span> Masjid As-Sunnah Hekinan.
    <div class="mt-3 flex flex-wrap justify-center gap-3 text-sm">
      <a href="#" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="instagram" class="w-4 h-4"></i>Instagram</a>
      <a href="#" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="youtube" class="w-4 h-4"></i>YouTube</a>
      <a href="#" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="facebook" class="w-4 h-4"></i>Facebook</a>
      <a href="kajian.html" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="video" class="w-4 h-4"></i>Kajian</a>
      <a href="pengumuman.html" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="megaphone" class="w-4 h-4"></i>Pengumuman</a>
      <a href="artikel.html" class="inline-flex items-center gap-2 hover:underline"><i data-lucide="file-text" class="w-4 h-4"></i>Artikel</a>
    </div>
  </div>
</footer>

<script type="module">
  import { boot } from './app.js';
  boot();
</script>
</body>
</html>
