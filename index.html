<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Masjid As-Sunnah Hekinan — Jadwal Sholat, Kegiatan & Donasi</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            fig: {
              primary: "#0EA5E9",
              primaryDark: "#0284C7",
              accent: "#F59E0B",
              success: "#10B981",
              surface: "#FFFFFF",
              text: "#0F172A",
              soft: "#F0F9FF",
              ink: "#0B1220",
              line: "#E2E8F0"
            }
          },
          borderRadius: { fig: "20px" },
          boxShadow: {
            soft: "0 14px 40px -20px rgba(2,8,23,.25)",
            lift: "0 18px 60px -35px rgba(2,8,23,.35)"
          },
          fontFamily: {
            sans: ["Inter","ui-sans-serif","system-ui","-apple-system","Segoe UI","Roboto","Noto Sans","Ubuntu","Cantarell","Helvetica Neue","Arial","sans-serif"]
          }
        }
      }
    }
  </script>

  <style>
    html{scroll-behavior:smooth}

    /* IMPROVE: visual rhythm */
    .card{background:rgba(255,255,255,.86);backdrop-filter: blur(10px)}
    .btn{transition:transform .15s ease, box-shadow .15s ease, background-color .15s ease, border-color .15s ease}
    .btn:active{transform:translateY(1px)}

    /* IMPROVE: subtle reveal */
    .reveal{opacity:0;transform:translateY(10px);transition:opacity .55s ease,transform .55s ease}
    .reveal.is-in{opacity:1;transform:none}

    /* IMPROVE: progress */
    #progressBar{transition:width 1s ease;background:linear-gradient(90deg,#0EA5E9,#38BDF8)}

    /* IMPROVE: milestone gamification (no icons) */
    .ms-dot{width:10px;height:10px;border-radius:9999px;border:1px solid #CBD5E1;background:#fff;transition:transform .15s ease, background-color .2s ease, border-color .2s ease, box-shadow .2s ease}
    .ms-dot.on{background:#0EA5E9;border-color:#0EA5E9;box-shadow:0 0 0 4px rgba(14,165,233,.15)}
    .ms-dot:active{transform:scale(.96)}

    /* slider */
    .scrollx-snap{scroll-snap-type:x mandatory}
    .snap-item{scroll-snap-align:start}
    .hide-scrollbar{scrollbar-width:none;-ms-overflow-style:none}
    .hide-scrollbar::-webkit-scrollbar{display:none}

    /* tabs */
    .tab-slider{position:absolute;bottom:0;height:2px;width:50%;background:#0EA5E9;transition:transform .25s ease;pointer-events:none}
    .tab-left .tab-slider{transform:translateX(0)}
    .tab-right .tab-slider{transform:translateX(100%)}

    /* FIX: focus ring for inputs/buttons */
    .ring-focus:focus{outline:none;box-shadow:0 0 0 4px rgba(14,165,233,.18)}
  </style>
</head>

<body class="font-sans text-fig-text bg-gradient-to-b from-fig-soft to-white">
  <div id="top"></div> <!-- FIX: anchor #top -->

  <!-- ADMIN NOTE (do not show publicly):
       Halaman ini menampilkan kajian dari Google Sheet (CSV). Anda dapat menambahkan link YouTube/Zoom/Drive, plus poster (opsional).
       Testimoni di halaman donasi sebaiknya menggunakan testimoni asli.
  -->

  <!-- HEADER -->
  <header class="sticky top-0 bg-white/80 backdrop-blur border-b border-slate-200 z-40">
    <nav class="container mx-auto px-4 py-3 flex justify-between items-center gap-3">
      <a href="#top" class="flex gap-3 items-center">
        <img src="logohekinan.jpeg" class="h-10 w-auto rounded-[12px]" alt="Logo">
        <div class="leading-tight">
          <div class="font-extrabold text-lg md:text-xl" data-i18n="brand">Masjid As-Sunnah Hekinan</div>
          <div class="text-xs text-slate-500" id="dateLine">&nbsp;</div>
        </div>
      </a>

      <div class="flex items-center gap-2">
        <!-- IMPROVE: language switcher (3 languages) -->
        <div class="hidden sm:flex items-center gap-1 rounded-[14px] border border-slate-200 bg-white/70 p-1">
          <button class="btn px-3 py-1.5 text-xs font-semibold rounded-[12px]" data-langbtn="id">ID</button>
          <button class="btn px-3 py-1.5 text-xs font-semibold rounded-[12px]" data-langbtn="en">EN</button>
          <button class="btn px-3 py-1.5 text-xs font-semibold rounded-[12px]" data-langbtn="ja">JP</button>
        </div>

        <button id="openData" class="admin-only hidden btn rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark text-sm">
          <span data-i18n="data_btn">Data</span>
        </button>
      </div>
    </nav>

    <div class="border-t border-slate-200/70">
      <div class="container mx-auto px-4 py-2 flex items-center justify-between">
        <div class="flex items-center gap-3 text-sm">
          <a href="#sholat" class="hover:text-fig-primaryDark" data-i18n="nav_sholat">Sholat</a>
          <a href="#kegiatan" class="hover:text-fig-primaryDark" data-i18n="nav_kegiatan">Kegiatan</a>
          <a href="#info" class="hover:text-fig-primaryDark" data-i18n="nav_info">Info</a>
          <a href="#donasi" class="rounded-[14px] bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-2 font-semibold shadow-soft btn" data-i18n="nav_donasi">Donasi</a>
        </div>

        <!-- Mobile lang switch -->
        <div class="sm:hidden flex items-center gap-1 rounded-[14px] border border-slate-200 bg-white/70 p-1">
          <button class="btn px-2.5 py-1 text-[11px] font-semibold rounded-[12px]" data-langbtn="id">ID</button>
          <button class="btn px-2.5 py-1 text-[11px] font-semibold rounded-[12px]" data-langbtn="en">EN</button>
          <button class="btn px-2.5 py-1 text-[11px] font-semibold rounded-[12px]" data-langbtn="ja">JP</button>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO (IMPROVE: more elegant & persuasive without icons/emoji) -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-fig-primary/15 blur-3xl"></div>
      <div class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-fig-accent/12 blur-3xl"></div>
    </div>

    <div class="container mx-auto px-4 pt-10 pb-8 md:pt-14">
      <div class="grid lg:grid-cols-12 gap-8 items-center">
        <div class="lg:col-span-7">
          <h1 class="text-3xl md:text-5xl font-extrabold leading-tight text-fig-ink" data-i18n="hero_title">
            Dukung operasional masjid dan program ilmu
          </h1>
          <p class="mt-4 text-slate-700 max-w-2xl leading-relaxed" data-i18n="hero_sub">
            Donasi Anda membantu kebutuhan rutin seperti listrik, air, kebersihan, dan perawatan. Alur donasi dibuat singkat agar mudah ditunaikan.
          </p>
          <div class="mt-6 flex flex-wrap gap-3">
            <a href="#donasi" class="btn rounded-[20px] bg-fig-primary hover:bg-fig-primaryDark text-white px-6 py-3 font-semibold shadow-soft" data-i18n="hero_cta">
              Mulai Donasi
            </a>
            <a href="#info" class="btn rounded-[20px] bg-white hover:bg-slate-50 border border-slate-200 px-6 py-3 font-semibold" data-i18n="hero_cta2">
              Lihat Kajian & Info
            </a>
          </div>

          <div class="mt-6 grid sm:grid-cols-3 gap-3 max-w-2xl">
            <div class="rounded-[20px] border border-slate-200 bg-white/70 p-4 card shadow-soft reveal" data-reveal>
              <div class="text-sm font-bold" data-i18n="hero_p1_t">Amanah</div>
              <div class="text-xs text-slate-600 mt-1" data-i18n="hero_p1_s">Rekening jelas, konfirmasi via WhatsApp.</div>
            </div>
            <div class="rounded-[20px] border border-slate-200 bg-white/70 p-4 card shadow-soft reveal" data-reveal>
              <div class="text-sm font-bold" data-i18n="hero_p2_t">Cepat</div>
              <div class="text-xs text-slate-600 mt-1" data-i18n="hero_p2_s">Pilih nominal, transfer, lalu konfirmasi.</div>
            </div>
            <div class="rounded-[20px] border border-slate-200 bg-white/70 p-4 card shadow-soft reveal" data-reveal>
              <div class="text-sm font-bold" data-i18n="hero_p3_t">Terukur</div>
              <div class="text-xs text-slate-600 mt-1" data-i18n="hero_p3_s">Progres target ditampilkan di halaman ini.</div>
            </div>
          </div>
        </div>

        <div class="lg:col-span-5">
          <div class="rounded-[20px] border border-slate-200 bg-white p-6 shadow-lift card reveal" data-reveal>
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="text-sm text-slate-600" data-i18n="hero_deadline_t">Deadline donasi</div>
                <div class="text-xl font-extrabold text-fig-ink" id="deadlineDate">31 Mei 2026</div>
                <div class="text-sm text-slate-600 mt-1" id="deadlineCountdown">&nbsp;</div>
              </div>
              <div class="text-right">
                <div class="text-xs text-slate-500" data-i18n="hero_deadline_note">Batas waktu pembayaran akhir Mei 2026 (JST)</div>
              </div>
            </div>

            <div class="mt-5 rounded-[20px] border border-slate-200 bg-fig-soft p-4">
              <div class="text-sm font-bold" data-i18n="hero_micro_t">Catatan singkat</div>
              <div class="text-sm text-slate-700 mt-1 leading-relaxed" data-i18n="hero_micro_s">
                Nominal kecil tetap bermakna bila dilakukan konsisten. Ini membantu stabilitas operasional bulanan.
              </div>
            </div>

            <div class="mt-5 flex gap-2">
              <a href="#donasi" class="btn w-full text-center rounded-[18px] bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-3 font-semibold" data-i18n="hero_cta3">Ke Halaman Donasi</a>
            </div>
          </div>
        </div>

      </div>

      <!-- IMPROVE: social proof (hidden until you add real testimonials) -->
      <div id="testiSection" class="mt-6 hidden">
        <div class="rounded-[20px] border border-slate-200 bg-white p-5">
          <h3 class="font-bold" data-i18n="testi_title">Testimoni</h3>
          <div id="testiGrid" class="mt-3 grid md:grid-cols-3 gap-3"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- JADWAL SHOLAT -->
  <section id="sholat" class="container mx-auto px-4 py-10">
    <div class="rounded-[20px] border border-slate-200 bg-white p-6 shadow-soft card reveal" data-reveal>
      <div class="flex justify-between items-start gap-3">
        <div>
          <h2 class="text-2xl font-extrabold" data-i18n="sholat_title">Jadwal Sholat</h2>
          <p id="locLabel" class="text-sm text-slate-600 mt-1" data-i18n="sholat_loc_loading">Mendeteksi lokasi…</p>
          <p class="text-xs text-slate-500 mt-1" id="hijriLine">&nbsp;</p>
        </div>
        <button id="refreshSholat" class="btn rounded-[12px] border border-slate-300 hover:border-fig-primaryDark px-3 py-2 text-sm ring-focus" data-i18n="sholat_refresh">
          Perbarui
        </button>
      </div>
      <div id="sholatGrid" class="mt-6 grid grid-cols-2 md:grid-cols-6 gap-3"></div>
      <p class="mt-3 text-xs text-slate-500" data-i18n="sholat_note">Waktu mengikuti zona perangkat Anda.</p>
    </div>
  </section>

  <!-- KEGIATAN -->
  <section id="kegiatan" class="bg-white border-y border-slate-200/70">
    <div class="container mx-auto px-4 py-10">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl md:text-3xl font-extrabold" data-i18n="kegiatan_title">Kegiatan</h2>
        <div class="hidden md:flex items-center gap-2">
          <button id="kgPrev" class="btn rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark" aria-label="Prev">&lt;</button>
          <button id="kgNext" class="btn rounded-[12px] border border-slate-300 px-3 py-2 hover:border-fig-primaryDark" aria-label="Next">&gt;</button>
        </div>
      </div>

      <div class="relative">
        <div id="kgTrack" class="scrollx-snap hide-scrollbar flex gap-4 overflow-x-auto rounded-[20px] border border-slate-200 p-4">
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
            <img src="./1.jpeg" class="w-full h-full object-cover" alt="Kegiatan 1" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
            <img src="./2.jpeg" class="w-full h-full object-cover" alt="Kegiatan 2" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
            <img src="./3.jpeg" class="w-full h-full object-cover" alt="Kegiatan 3" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-slate-100">
            <img src="./4.jpeg" class="w-full h-full object-cover" alt="Kegiatan 4" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-white flex items-center justify-center">
            <img src="./5.jpeg" class="max-w-full max-h-full object-contain" alt="Poster" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-white flex items-center justify-center">
            <img src="./6.jpeg" class="max-w-full max-h-full object-contain" alt="Poster" loading="lazy">
          </figure>
          <figure class="snap-item shrink-0 w-[85%] sm:w-[60%] md:w-[45%] lg:w-[32%] h-64 md:h-80 rounded-[20px] overflow-hidden bg-white flex items-center justify-center">
            <img src="./7.jpeg" class="max-w-full max-h-full object-contain" alt="Poster" loading="lazy">
          </figure>
        </div>

        <div class="md:hidden absolute inset-y-0 left-0 flex items-center">
          <button id="kgPrevMob" class="btn m-2 rounded-full bg-white/85 hover:bg-white p-2 shadow-soft" aria-label="Prev">&lt;</button>
        </div>
        <div class="md:hidden absolute inset-y-0 right-0 flex items-center">
          <button id="kgNextMob" class="btn m-2 rounded-full bg-white/85 hover:bg-white p-2 shadow-soft" aria-label="Next">&gt;</button>
        </div>
      </div>

      <p class="mt-4 text-center text-xs text-slate-500" data-i18n="kegiatan_note">Geser kiri/kanan atau gunakan tombol navigasi.</p>
    </div>
  </section>

  <!-- INFO -->
  <section id="info" class="container mx-auto px-4 py-10">
    <div class="rounded-[20px] border border-slate-200 bg-white p-6 shadow-soft card reveal" data-reveal>
      <div class="flex items-end justify-between gap-3 flex-wrap">
        <div>
          <h2 class="text-2xl md:text-3xl font-extrabold" data-i18n="info_title">Pengumuman & Artikel</h2>
          <p class="text-sm text-slate-600 mt-1" data-i18n="info_sub">Pengumuman, artikel, dan kajian terbaru.</p>
        </div>
        <div class="flex gap-2">
          <a href="kajian.html" class="btn rounded-[12px] border border-slate-300 px-4 py-2 hover:border-fig-primaryDark text-sm" data-i18n="info_kajian_btn">Kajian</a>
          <a href="pengumuman.html" class="btn rounded-[12px] border border-slate-300 px-4 py-2 hover:border-fig-primaryDark text-sm" data-i18n="info_pengumuman_btn">Pengumuman</a>
          <a href="artikel.html" class="btn rounded-[12px] border border-slate-300 px-4 py-2 hover:border-fig-primaryDark text-sm" data-i18n="info_artikel_btn">Artikel</a>
        </div>
      </div>

      <div id="tabs" class="relative tab-left mt-6">
        <div class="flex gap-2">
          <button id="tabPengumuman" class="flex-1 rounded-[12px] px-4 py-2 text-sm font-semibold border border-slate-300 bg-slate-50" data-i18n="tab_pengumuman">Pengumuman</button>
          <button id="tabArtikel" class="flex-1 rounded-[12px] px-4 py-2 text-sm font-semibold border border-slate-300 bg-slate-50" data-i18n="tab_artikel">Artikel</button>
        </div>
        <span class="tab-slider"></span>
      </div>

      <div id="wrapPengumuman" class="mt-6 grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      <p id="boardEmpty" class="hidden text-sm text-slate-500" data-i18n="empty_pengumuman">Belum ada pengumuman.</p>

      <div id="wrapArtikel" class="mt-6 hidden">
        <div class="flex justify-end">
          <input id="searchArtikel" class="ring-focus pl-3 pr-3 py-2 rounded-[12px] border border-slate-300 focus:border-fig-primary text-sm w-64 max-w-full" data-i18n-placeholder="search_placeholder" placeholder="Cari artikel…">
        </div>
        <div id="artikelList" class="mt-4 grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        <p id="artikelEmpty" class="hidden text-sm text-slate-500" data-i18n="empty_artikel">Belum ada artikel.</p>
      </div>
    </div>
  </section>

  <!-- DONASI -->
  <section id="donasi" class="container mx-auto px-4 pb-12">
    <div class="flex items-end justify-between gap-3 flex-wrap mb-4">
      <div>
        <h2 class="text-2xl md:text-3xl font-extrabold" data-i18n="donasi_title">Progres Donasi</h2>
        <p class="text-sm text-slate-600 mt-1" data-i18n="donasi_sub">Silakan donasi lalu konfirmasi melalui WhatsApp.</p>
      </div>
      <div class="text-sm text-slate-700">
        <span class="font-semibold" data-i18n="donasi_deadline">Deadline pembayaran:</span>
        <span class="font-bold" id="deadlineInline">31 Mei 2026</span>
      </div>
    </div>

    <div class="rounded-[20px] border border-slate-200 bg-fig-soft p-6 card shadow-soft reveal" data-reveal>
      <div class="grid lg:grid-cols-12 gap-6">
        <div class="lg:col-span-7">
          <div class="flex justify-between items-end">
            <div>
              <p class="text-sm text-slate-600" data-i18n="donasi_terkumpul">Terkumpul</p>
              <p id="terkumpulLabel" class="text-3xl font-bold">JPY 0</p>
            </div>
            <div class="text-right">
              <p class="text-sm text-slate-600" data-i18n="donasi_target">Target</p>
              <p id="targetLabel" class="text-2xl font-bold">JPY 0</p>
            </div>
          </div>

          <div class="mt-4 w-full bg-white rounded-full border border-slate-200 overflow-hidden">
            <div id="progressBar" class="h-3 w-0"></div>
          </div>
          <p class="mt-2 text-sm text-slate-600"><span id="percentLabel">0</span>% <span data-i18n="donasi_tercapai">tercapai</span></p>

          <!-- IMPROVE: light gamification milestones (no icons) -->
          <div class="mt-3 flex items-center justify-between text-[11px] text-slate-600">
            <div class="flex items-center gap-2"><span id="ms25" class="ms-dot" aria-hidden="true"></span><span>25%</span></div>
            <div class="flex items-center gap-2"><span id="ms50" class="ms-dot" aria-hidden="true"></span><span>50%</span></div>
            <div class="flex items-center gap-2"><span id="ms75" class="ms-dot" aria-hidden="true"></span><span>75%</span></div>
            <div class="flex items-center gap-2"><span id="ms100" class="ms-dot" aria-hidden="true"></span><span>100%</span></div>
          </div>

          <div class="mt-6 rounded-[20px] border border-slate-200 bg-white p-5">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div>
                <label class="text-sm font-semibold" data-i18n="donasi_jpy">Nominal (JPY)</label>
                <input id="inputJPY" type="number" min="1000" step="1000" class="ring-focus mt-1 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary" data-i18n-placeholder="donasi_jpy_ph" placeholder="Masukkan JPY"/>
                <div class="mt-2 flex flex-wrap gap-2 text-xs">
                  <button class="btn quick-jpy border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="1000">1.000</button>
                  <button class="btn quick-jpy border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="5000">5.000</button>
                  <button class="btn quick-jpy border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="10000">10.000</button>
                  <button class="btn quick-jpy border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="20000">20.000</button>
                </div>
              </div>
              <div>
                <label class="text-sm font-semibold" data-i18n="donasi_idr">Nominal (IDR)</label>
                <input id="inputIDR" type="number" min="10000" step="1000" class="ring-focus mt-1 w-full rounded-[12px] border border-slate-300 px-3 py-2 focus:border-fig-primary" data-i18n-placeholder="donasi_idr_ph" placeholder="Masukkan IDR"/>
                <div class="mt-2 flex flex-wrap gap-2 text-xs">
                  <button class="btn quick-idr border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="50000">50.000</button>
                  <button class="btn quick-idr border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="100000">100.000</button>
                  <button class="btn quick-idr border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="200000">200.000</button>
                  <button class="btn quick-idr border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-v="500000">500.000</button>
                </div>
              </div>
            </div>

            <button id="donasiBtn" class="btn mt-4 w-full rounded-[20px] bg-fig-primary hover:bg-fig-primaryDark text-white font-semibold px-6 py-3 ring-focus" data-i18n="donasi_wa_btn">
              Konfirmasi via WhatsApp
            </button>
            <p class="mt-2 text-[11px] text-slate-500" data-i18n="donasi_min">Minimal 1.000 JPY atau 10.000 IDR.</p>

            <div class="mt-4 rounded-[16px] border border-slate-200 bg-fig-soft p-4">
              <div class="text-sm font-bold" data-i18n="donasi_steps_t">Alur Donasi</div>
              <ol class="mt-2 text-sm text-slate-700 list-decimal pl-5 space-y-1">
                <li data-i18n="donasi_steps_1">Pilih nominal donasi.</li>
                <li data-i18n="donasi_steps_2">Transfer ke rekening yang sesuai.</li>
                <li data-i18n="donasi_steps_3">Klik tombol WhatsApp untuk konfirmasi.</li>
              </ol>
            </div>
          </div>
        </div>

        <div class="lg:col-span-5">
          <div class="grid gap-6">
            <div class="rounded-[20px] border border-slate-200 bg-white p-5">
              <h3 class="font-bold" data-i18n="donasi_japan">Jepang — Yucho Bank</h3>
              <p class="text-sm text-slate-700 mt-1" data-i18n="donasi_an1">a.n. Yoshimine Adelfa</p>
              <p class="text-sm text-slate-700"><span data-i18n="donasi_rek">No. Rekening:</span> <span id="rekYucho">12160-00457031</span></p>
              <button data-copy="#rekYucho" class="btn mt-2 text-xs border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-i18n="donasi_copy">Salin No. Rek</button>
            </div>

            <div class="rounded-[20px] border border-slate-200 bg-white p-5">
              <h3 class="font-bold" data-i18n="donasi_indonesia">Indonesia — Bank Syariah Indonesia</h3>
              <p class="text-sm text-slate-700 mt-1" data-i18n="donasi_an2">a.n. Hidayah Cinta Hekinan</p>
              <p class="text-sm text-slate-700"><span data-i18n="donasi_rek">No. Rekening:</span> <span id="rekBsi">7329283768</span></p>
              <button data-copy="#rekBsi" class="btn mt-2 text-xs border rounded-[12px] px-3 py-1 hover:border-fig-primaryDark" data-i18n="donasi_copy">Salin No. Rek</button>
            </div>

            <div class="rounded-[20px] border border-slate-200 bg-white p-5">
              <h3 class="font-bold" data-i18n="donasi_trust_t">Kepercayaan</h3>
              <p class="text-sm text-slate-700 mt-2 leading-relaxed" data-i18n="donasi_trust_s">
                Jika Anda membutuhkan konfirmasi, silakan hubungi admin melalui WhatsApp setelah transfer. Website tidak menyimpan data pribadi Anda.
              </p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- FAQ (IMPROVE: ringkas, jelas, 3 bahasa) -->
  <section id="faq" class="container mx-auto px-4 pb-12">
    <div class="rounded-[20px] border border-slate-200 bg-white p-6 shadow-soft card reveal" data-reveal>
      <div class="flex items-end justify-between gap-3 flex-wrap">
        <div>
          <h2 class="text-2xl md:text-3xl font-extrabold" data-i18n="faq_title">FAQ</h2>
          <p class="text-sm text-slate-600 mt-1" data-i18n="faq_sub">Jawaban singkat untuk pertanyaan yang paling sering ditanyakan.</p>
        </div>
        <a href="#donasi" class="btn rounded-[12px] border border-slate-300 px-4 py-2 hover:border-fig-primaryDark text-sm" data-i18n="faq_back_btn">
          Kembali ke Donasi
        </a>
      </div>

      <div class="mt-5 space-y-3">
        <details class="rounded-[18px] border border-slate-200 p-4">
          <summary class="font-semibold cursor-pointer" data-i18n="faq_q1">Bagaimana cara konfirmasi setelah transfer?</summary>
          <p class="mt-2 text-sm text-slate-700 leading-relaxed" data-i18n="faq_a1">
            Setelah transfer, klik tombol WhatsApp pada bagian donasi, lalu kirimkan bukti transfer. Admin akan membalas untuk konfirmasi.
          </p>
        </details>

        <details class="rounded-[18px] border border-slate-200 p-4">
          <summary class="font-semibold cursor-pointer" data-i18n="faq_q2">Apakah boleh donasi dari luar Jepang?</summary>
          <p class="mt-2 text-sm text-slate-700 leading-relaxed" data-i18n="faq_a2">
            Boleh. Silakan pilih rekening yang paling mudah (JPY atau IDR), lalu konfirmasi melalui WhatsApp.
          </p>
        </details>

        <details class="rounded-[18px] border border-slate-200 p-4">
          <summary class="font-semibold cursor-pointer" data-i18n="faq_q3">Donasi digunakan untuk apa?</summary>
          <p class="mt-2 text-sm text-slate-700 leading-relaxed" data-i18n="faq_a3">
            Untuk kebutuhan operasional dan perawatan fasilitas (misalnya listrik, air, kebersihan, dan perbaikan ringan) serta dukungan program kajian.
          </p>
        </details>

        <details class="rounded-[18px] border border-slate-200 p-4">
          <summary class="font-semibold cursor-pointer" data-i18n="faq_q4">Apakah website menyimpan data pribadi?</summary>
          <p class="mt-2 text-sm text-slate-700 leading-relaxed" data-i18n="faq_a4">
            Tidak. Website hanya menampilkan informasi dan mengambil konten dari Google Sheet (CSV). Konfirmasi dilakukan melalui WhatsApp.
          </p>
        </details>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-white">
    <div class="container mx-auto px-4 py-10">
      <div class="grid md:grid-cols-3 gap-8">
        <div>
          <img src="logohekinan.jpeg" alt="Logo" class="h-12 w-auto mb-3 rounded-[12px]">
          <h3 class="font-bold" data-i18n="brand">Masjid As-Sunnah Hekinan</h3>
          <p class="mt-1 text-sm text-slate-700">1 Chome-8 Dojoyamamachi, Hekinan, Aichi 447-0864</p>
          <p class="text-sm text-slate-700">Email: hekinanmosque@gmail.com</p>
        </div>
        <div>
          <h3 class="font-bold" data-i18n="footer_links">Tautan</h3>
          <ul class="mt-2 space-y-2 text-sm">
            <li><a href="#sholat" class="hover:text-fig-primaryDark" data-i18n="nav_sholat">Sholat</a></li>
            <li><a href="#kegiatan" class="hover:text-fig-primaryDark" data-i18n="nav_kegiatan">Kegiatan</a></li>
            <li><a href="#info" class="hover:text-fig-primaryDark" data-i18n="nav_info">Info</a></li>
            <li><a href="#donasi" class="hover:text-fig-primaryDark" data-i18n="nav_donasi">Donasi</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-bold" data-i18n="footer_follow">Ikuti Kami</h3>
          <div class="mt-2 flex items-center gap-3 flex-wrap">
            <a href="https://www.instagram.com/assunnahhekinan" target="_blank" rel="noopener" class="btn flex items-center gap-2 px-3 py-2 rounded-[12px] border hover:border-fig-primaryDark text-sm">Instagram</a>
            <a href="https://www.youtube.com/@assunnahhekinan" target="_blank" rel="noopener" class="btn flex items-center gap-2 px-3 py-2 rounded-[12px] border hover:border-fig-primaryDark text-sm">YouTube</a>
            <a href="https://www.tiktok.com/" target="_blank" rel="noopener" class="btn flex items-center gap-2 px-3 py-2 rounded-[12px] border hover:border-fig-primaryDark text-sm">TikTok</a>
          </div>
        </div>
      </div>
      <div class="mt-8 border-t border-slate-200 pt-6 text-xs text-slate-500 flex flex-col md:flex-row justify-between">
        <p>© <span id="year"></span> <span data-i18n="brand">Masjid As-Sunnah Hekinan</span>.</p>
        <p>Design by Abu Khayla.</p>
      </div>
    </div>
  </footer>

  <!-- DATA MODAL -->
  <div id="dataModal" class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-4 z-50">
    <div class="w-full max-w-2xl rounded-2xl bg-white p-6 shadow-soft">
      <div class="flex items-start justify-between gap-4">
        <h3 class="text-lg font-bold text-slate-900" data-i18n="data_title">Sumber Data</h3>
        <button id="closeData" class="text-slate-500 hover:text-slate-700" aria-label="Tutup">×</button>
      </div>

      <div class="grid md:grid-cols-2 gap-4 mt-4">
        <div class="rounded-xl border border-slate-200 p-4">
          <label class="text-sm font-semibold" data-i18n="data_csv_kajian">CSV Kajian</label>
          <input id="csvKajian" type="url" class="ring-focus mt-2 w-full rounded-xl border border-slate-300 px-3 py-2 focus:border-fig-primary"
                 value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSlE8S0iOWE3ssrAkrsm1UE_qMfFZAHLXD057zfZslsu1VCdiIDI2jdHc_gjGBOKqQFFo-iLYouGwm9/pub?gid=0&single=true&output=csv">
        </div>
        <div class="rounded-xl border border-slate-200 p-4">
          <label class="text-sm font-semibold" data-i18n="data_csv_pengumuman">CSV Pengumuman</label>
          <input id="csvPengumuman" type="url" class="ring-focus mt-2 w-full rounded-xl border border-slate-300 px-3 py-2 focus:border-fig-primary"
                 value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSlE8S0iOWE3ssrAkrsm1UE_qMfFZAHLXD057zfZslsu1VCdiIDI2jdHc_gjGBOKqQFFo-iLYouGwm9/pub?gid=991747005&single=true&output=csv">
        </div>
        <div class="rounded-xl border border-slate-200 p-4">
          <label class="text-sm font-semibold" data-i18n="data_csv_artikel">CSV Artikel</label>
          <input id="csvArtikel" type="url" class="ring-focus mt-2 w-full rounded-xl border border-slate-300 px-3 py-2 focus:border-fig-primary"
                 value="https://docs.google.com/spreadsheets/d/e/2PACX-1vSlE8S0iOWE3ssrAkrsm1UE_qMfFZAHLXD057zfZslsu1VCdiIDI2jdHc_gjGBOKqQFFo-iLYouGwm9/pub?gid=1625529193&single=true&output=csv">
        </div>
      </div>

      <div class="mt-4 flex justify-end">
        <button id="saveData" class="btn rounded-xl bg-fig-primary hover:bg-fig-primaryDark text-white px-4 py-2 text-sm font-semibold" data-i18n="data_save">Simpan</button>
      </div>
    </div>
  </div>

  <script>
    // IMPROVE: i18n (ID/EN/JP) + Hijri date + donation deadline countdown
    (function () {
      const $ = (q, el=document) => el.querySelector(q);
      const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));

      const I18N = {
        id: {
          brand: "Masjid As-Sunnah Hekinan",
          data_btn: "Data",
          nav_sholat: "Sholat",
          nav_kegiatan: "Kegiatan",
          nav_info: "Info",
          nav_donasi: "Donasi",

          hero_title: "Dukung operasional masjid dan program ilmu",
          hero_sub: "Donasi Anda membantu kebutuhan rutin seperti listrik, air, kebersihan, dan perawatan. Alur donasi dibuat singkat agar mudah ditunaikan.",
          hero_cta: "Mulai Donasi",
          hero_cta2: "Lihat Kajian & Info",
          hero_p1_t: "Amanah",
          hero_p1_s: "Rekening jelas, konfirmasi via WhatsApp.",
          hero_p2_t: "Cepat",
          hero_p2_s: "Pilih nominal, transfer, lalu konfirmasi.",
          hero_p3_t: "Terukur",
          hero_p3_s: "Progres target ditampilkan di halaman ini.",
          hero_deadline_t: "Deadline donasi",
          hero_deadline_note: "Batas waktu pembayaran akhir Mei 2026 (JST)",
          hero_micro_t: "Catatan singkat",
          hero_micro_s: "Nominal kecil tetap bermakna bila dilakukan konsisten. Ini membantu stabilitas operasional bulanan.",
          hero_cta3: "Ke Halaman Donasi",

          sholat_title: "Jadwal Sholat",
          sholat_loc_loading: "Mendeteksi lokasi…",
          sholat_refresh: "Perbarui",
          sholat_note: "Waktu mengikuti zona perangkat Anda.",

          kegiatan_title: "Kegiatan",
          kegiatan_note: "Geser kiri/kanan atau gunakan tombol navigasi.",

          info_title: "Pengumuman & Artikel",
          info_sub: "Pengumuman, artikel, dan kajian terbaru.",
          info_kajian_btn: "Kajian",
          info_pengumuman_btn: "Pengumuman",
          info_artikel_btn: "Artikel",

          tab_pengumuman: "Pengumuman",
          tab_artikel: "Artikel",
          empty_pengumuman: "Belum ada pengumuman.",
          empty_artikel: "Belum ada artikel.",
          search_placeholder: "Cari artikel…",

          donasi_title: "Progres Donasi",
          donasi_sub: "Silakan donasi lalu konfirmasi melalui WhatsApp.",
          donasi_deadline: "Deadline pembayaran:",
          donasi_terkumpul: "Terkumpul",
          donasi_target: "Target",
          donasi_tercapai: "tercapai",
          donasi_jpy: "Nominal (JPY)",
          donasi_idr: "Nominal (IDR)",
          donasi_jpy_ph: "Masukkan JPY",
          donasi_idr_ph: "Masukkan IDR",
          donasi_wa_btn: "Konfirmasi via WhatsApp",
          donasi_min: "Minimal 1.000 JPY atau 10.000 IDR.",
          donasi_steps_t: "Alur Donasi",
          donasi_steps_1: "Pilih nominal donasi.",
          donasi_steps_2: "Transfer ke rekening yang sesuai.",
          donasi_steps_3: "Klik tombol WhatsApp untuk konfirmasi.",
          donasi_japan: "Jepang — Yucho Bank",
          donasi_indonesia: "Indonesia — Bank Syariah Indonesia",
          donasi_an1: "a.n. Yoshimine Adelfa",
          donasi_an2: "a.n. Hidayah Cinta Hekinan",
          donasi_rek: "No. Rekening:",
          donasi_copy: "Salin No. Rek",
          donasi_trust_t: "Kepercayaan",
          donasi_trust_s: "Jika Anda membutuhkan konfirmasi, silakan hubungi admin melalui WhatsApp setelah transfer. Website tidak menyimpan data pribadi Anda.",

          testi_title: "Testimoni",

          faq_title: "FAQ",
          faq_sub: "Jawaban singkat untuk pertanyaan yang paling sering ditanyakan.",
          faq_back_btn: "Kembali ke Donasi",
          faq_q1: "Bagaimana cara konfirmasi setelah transfer?",
          faq_a1: "Setelah transfer, klik tombol WhatsApp pada bagian donasi, lalu kirimkan bukti transfer. Admin akan membalas untuk konfirmasi.",
          faq_q2: "Apakah boleh donasi dari luar Jepang?",
          faq_a2: "Boleh. Silakan pilih rekening yang paling mudah (JPY atau IDR), lalu konfirmasi melalui WhatsApp.",
          faq_q3: "Donasi digunakan untuk apa?",
          faq_a3: "Untuk kebutuhan operasional dan perawatan fasilitas (misalnya listrik, air, kebersihan, dan perbaikan ringan) serta dukungan program kajian.",
          faq_q4: "Apakah website menyimpan data pribadi?",
          faq_a4: "Tidak. Website hanya menampilkan informasi dan mengambil konten dari Google Sheet (CSV). Konfirmasi dilakukan melalui WhatsApp.",

          footer_links: "Tautan",
          footer_follow: "Ikuti Kami",

          data_title: "Sumber Data",
          data_csv_kajian: "CSV Kajian",
          data_csv_pengumuman: "CSV Pengumuman",
          data_csv_artikel: "CSV Artikel",
          data_save: "Simpan",

          countdown_prefix: "Sisa",
          countdown_suffix: "menuju deadline.",
          countdown_done: "Deadline telah lewat."
        },
        en: {
          brand: "Masjid As-Sunnah Hekinan",
          data_btn: "Data",
          nav_sholat: "Prayer Times",
          nav_kegiatan: "Activities",
          nav_info: "Info",
          nav_donasi: "Donate",

          hero_title: "Support the mosque’s operations and educational programs",
          hero_sub: "Your donation supports recurring needs such as utilities, cleanliness, and maintenance. The donation flow is kept short to make it easy.",
          hero_cta: "Donate Now",
          hero_cta2: "View Lectures & Info",
          hero_p1_t: "Trusted",
          hero_p1_s: "Clear accounts, confirm via WhatsApp.",
          hero_p2_t: "Fast",
          hero_p2_s: "Choose an amount, transfer, then confirm.",
          hero_p3_t: "Measurable",
          hero_p3_s: "Target progress is shown on this page.",
          hero_deadline_t: "Donation deadline",
          hero_deadline_note: "Payment deadline: end of May 2026 (JST)",
          hero_micro_t: "Quick note",
          hero_micro_s: "Small amounts still matter when given consistently. It helps monthly operational stability.",
          hero_cta3: "Go to Donation",

          sholat_title: "Prayer Times",
          sholat_loc_loading: "Detecting location…",
          sholat_refresh: "Refresh",
          sholat_note: "Times follow your device timezone.",

          kegiatan_title: "Activities",
          kegiatan_note: "Swipe left/right or use the navigation buttons.",

          info_title: "Announcements & Articles",
          info_sub: "Latest announcements, articles, and lectures.",
          info_kajian_btn: "Lectures",
          info_pengumuman_btn: "Announcements",
          info_artikel_btn: "Articles",

          tab_pengumuman: "Announcements",
          tab_artikel: "Articles",
          empty_pengumuman: "No announcements yet.",
          empty_artikel: "No articles yet.",
          search_placeholder: "Search articles…",

          donasi_title: "Donation Progress",
          donasi_sub: "Please donate and then confirm via WhatsApp.",
          donasi_deadline: "Payment deadline:",
          donasi_terkumpul: "Collected",
          donasi_target: "Target",
          donasi_tercapai: "achieved",
          donasi_jpy: "Amount (JPY)",
          donasi_idr: "Amount (IDR)",
          donasi_jpy_ph: "Enter JPY",
          donasi_idr_ph: "Enter IDR",
          donasi_wa_btn: "Confirm via WhatsApp",
          donasi_min: "Minimum 1,000 JPY or 10,000 IDR.",
          donasi_steps_t: "Donation Steps",
          donasi_steps_1: "Choose an amount.",
          donasi_steps_2: "Transfer to the appropriate account.",
          donasi_steps_3: "Click the WhatsApp button to confirm.",
          donasi_japan: "Japan — Yucho Bank",
          donasi_indonesia: "Indonesia — Bank Syariah Indonesia",
          donasi_an1: "Account name: Yoshimine Adelfa",
          donasi_an2: "Account name: Hidayah Cinta Hekinan",
          donasi_rek: "Account no.:",
          donasi_copy: "Copy",
          donasi_trust_t: "Trust",
          donasi_trust_s: "If you need confirmation, contact the admin via WhatsApp after transferring. This website does not store your personal data.",

          testi_title: "Testimonials",

          faq_title: "FAQ",
          faq_sub: "Short answers to the most common questions.",
          faq_back_btn: "Back to Donate",
          faq_q1: "How do I confirm after transferring?",
          faq_a1: "After you transfer, click the WhatsApp button in the donation section and send your transfer proof. The admin will reply to confirm.",
          faq_q2: "Can I donate from outside Japan?",
          faq_a2: "Yes. Please choose the easiest account for you (JPY or IDR), then confirm via WhatsApp.",
          faq_q3: "What is the donation used for?",
          faq_a3: "For operations and facility maintenance (utilities, cleanliness, minor repairs) and to support lecture programs.",
          faq_q4: "Does the website store personal data?",
          faq_a4: "No. This website only shows information and pulls content from Google Sheets (CSV). Confirmation is done via WhatsApp.",

          footer_links: "Links",
          footer_follow: "Follow",

          data_title: "Data Sources",
          data_csv_kajian: "Lectures CSV",
          data_csv_pengumuman: "Announcements CSV",
          data_csv_artikel: "Articles CSV",
          data_save: "Save",

          countdown_prefix: "Remaining",
          countdown_suffix: "until the deadline.",
          countdown_done: "The deadline has passed."
        },
        ja: {
          brand: "Masjid As-Sunnah Hekinan",
          data_btn: "データ",
          nav_sholat: "礼拝時間",
          nav_kegiatan: "活動",
          nav_info: "お知らせ",
          nav_donasi: "寄付",

          hero_title: "モスク運営と学びの活動を支援してください",
          hero_sub: "寄付は電気・水道・清掃・設備維持など、日々の運営を支えます。手順を短くして、気持ちよく寄付できるようにしています。",
          hero_cta: "寄付する",
          hero_cta2: "講義・お知らせ",
          hero_p1_t: "信頼",
          hero_p1_s: "口座情報が明確、WhatsAppで確認可能。",
          hero_p2_t: "簡単",
          hero_p2_s: "金額選択→振込→確認。",
          hero_p3_t: "見える化",
          hero_p3_s: "目標の進捗を表示します。",
          hero_deadline_t: "寄付の期限",
          hero_deadline_note: "支払い期限：2026年5月末（JST）",
          hero_micro_t: "メモ",
          hero_micro_s: "少額でも継続すると大きな支えになります。月々の運営を安定させます。",
          hero_cta3: "寄付へ",

          sholat_title: "礼拝時間",
          sholat_loc_loading: "位置情報を取得中…",
          sholat_refresh: "更新",
          sholat_note: "時間は端末のタイムゾーンに従います。",

          kegiatan_title: "活動",
          kegiatan_note: "左右にスワイプ、またはボタンで移動できます。",

          info_title: "お知らせ・記事",
          info_sub: "最新のお知らせ・記事・講義。",
          info_kajian_btn: "講義",
          info_pengumuman_btn: "お知らせ",
          info_artikel_btn: "記事",

          tab_pengumuman: "お知らせ",
          tab_artikel: "記事",
          empty_pengumuman: "お知らせはまだありません。",
          empty_artikel: "記事はまだありません。",
          search_placeholder: "記事を検索…",

          donasi_title: "寄付の進捗",
          donasi_sub: "寄付後、WhatsAppで確認してください。",
          donasi_deadline: "支払い期限：",
          donasi_terkumpul: "集まった額",
          donasi_target: "目標",
          donasi_tercapai: "達成",
          donasi_jpy: "金額（JPY）",
          donasi_idr: "金額（IDR）",
          donasi_jpy_ph: "JPYを入力",
          donasi_idr_ph: "IDRを入力",
          donasi_wa_btn: "WhatsAppで確認",
          donasi_min: "最低 1,000 JPY または 10,000 IDR。",
          donasi_steps_t: "手順",
          donasi_steps_1: "金額を選択します。",
          donasi_steps_2: "該当の口座へ振り込みます。",
          donasi_steps_3: "WhatsAppボタンで確認します。",
          donasi_japan: "日本 — ゆうちょ銀行",
          donasi_indonesia: "インドネシア — Bank Syariah Indonesia",
          donasi_an1: "名義：Yoshimine Adelfa",
          donasi_an2: "名義：Hidayah Cinta Hekinan",
          donasi_rek: "口座番号：",
          donasi_copy: "コピー",
          donasi_trust_t: "信頼",
          donasi_trust_s: "確認が必要な場合は、振込後にWhatsAppで管理者へご連絡ください。個人情報は当サイトに保存しません。",

          testi_title: "寄付者の声",

          faq_title: "よくある質問",
          faq_sub: "よくある質問への短い回答です。",
          faq_back_btn: "寄付に戻る",
          faq_q1: "振込後の確認はどうすればいいですか？",
          faq_a1: "振込後、寄付欄のWhatsAppボタンを押して、振込明細（証明）を送ってください。管理者が返信して確認します。",
          faq_q2: "日本以外からも寄付できますか？",
          faq_a2: "はい。JPYまたはIDRのうち、手続きしやすい口座を選び、WhatsAppで確認してください。",
          faq_q3: "寄付は何に使われますか？",
          faq_a3: "運営費と設備維持（電気・水道・清掃・軽微な修繕）および講義活動の支援に使われます。",
          faq_q4: "このサイトは個人情報を保存しますか？",
          faq_a4: "いいえ。サイトは情報を表示し、Google Sheet（CSV）から内容を取得するのみです。確認はWhatsAppで行います。",

          footer_links: "リンク",
          footer_follow: "フォロー",

          data_title: "データソース",
          data_csv_kajian: "講義CSV",
          data_csv_pengumuman: "お知らせCSV",
          data_csv_artikel: "記事CSV",
          data_save: "保存",

          countdown_prefix: "期限まで",
          countdown_suffix: "",
          countdown_done: "期限を過ぎています。"
        }
      };

      function setActiveLangButton(lang){
        $$('[data-langbtn]').forEach(b => {
          const on = b.getAttribute('data-langbtn') === lang;
          b.classList.toggle('bg-fig-primary', on);
          b.classList.toggle('text-white', on);
          b.classList.toggle('bg-white', !on);
          b.classList.toggle('text-slate-700', !on);
          b.classList.toggle('border', !on);
          b.classList.toggle('border-slate-200', !on);
        });
      }

      function applyLang(lang){
        const dict = I18N[lang] || I18N.id;
        document.documentElement.lang = lang === 'ja' ? 'ja' : (lang === 'en' ? 'en' : 'id');
        $$('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (dict[key] != null) el.textContent = dict[key];
        });
        $$('[data-i18n-placeholder]').forEach(el => {
          const key = el.getAttribute('data-i18n-placeholder');
          if (dict[key] != null) el.setAttribute('placeholder', dict[key]);
        });

        // Update date line & Hijri line
        updateDateLines(lang);

        // Update deadline strings that are rendered as formatted dates
        renderDeadline(lang);

        // IMPROVE: testimonials title follows language; content is rendered only if provided
        renderTestimonials(lang);

        setActiveLangButton(lang);
        localStorage.setItem('lang', lang);
      }

      function safeIntlDate(locale, options, date){
        try { return new Intl.DateTimeFormat(locale, options).format(date); }
        catch(e) { return date.toLocaleDateString(); }
      }

      function formatHijri(localeBase, date){
        // FIX: Hijri calendar using built-in Intl with Islamic calendar
        const loc = localeBase + '-u-ca-islamic';
        return safeIntlDate(loc, { day: 'numeric', month: 'long', year: 'numeric' }, date);
      }

      function updateDateLines(lang){
        const now = new Date();
        const locale = lang === 'ja' ? 'ja-JP' : (lang === 'en' ? 'en-US' : 'id-ID');
        const greg = safeIntlDate(locale, { weekday:'long', year:'numeric', month:'long', day:'numeric' }, now);
        const hijri = formatHijri(locale, now) + ' H';

        const dateLine = $('#dateLine');
        if (dateLine) dateLine.textContent = greg;

        const hijriLine = $('#hijriLine');
        if (hijriLine) hijriLine.textContent = hijri;
      }

      // Deadline: end of May 2026 (JST)
      const DEADLINE_ISO = '2026-05-31T23:59:59+09:00';
      const deadlineDate = new Date(DEADLINE_ISO);

      function renderDeadline(lang){
        const dict = I18N[lang] || I18N.id;
        const locale = lang === 'ja' ? 'ja-JP' : (lang === 'en' ? 'en-US' : 'id-ID');

        const dateText = safeIntlDate(locale, { year:'numeric', month:'long', day:'numeric' }, deadlineDate);

        const d1 = $('#deadlineDate');
        if (d1) d1.textContent = dateText;

        const d2 = $('#deadlineInline');
        if (d2) d2.textContent = dateText;

        const countdown = $('#deadlineCountdown');
        if (!countdown) return;

        const tick = () => {
          const now = new Date();
          const diff = deadlineDate.getTime() - now.getTime();
          if (diff <= 0) {
            countdown.textContent = dict.countdown_done;
            return;
          }
          const totalSeconds = Math.floor(diff / 1000);
          const days = Math.floor(totalSeconds / 86400);
          const hours = Math.floor((totalSeconds % 86400) / 3600);
          const mins = Math.floor((totalSeconds % 3600) / 60);

          if (lang === 'ja') {
            countdown.textContent = `${dict.countdown_prefix}${days}日${hours}時間${mins}分`;
          } else {
            const unit = lang === 'en' ? 'days' : 'hari';
            const unitH = lang === 'en' ? 'hours' : 'jam';
            const unitM = lang === 'en' ? 'minutes' : 'menit';
            countdown.textContent = `${dict.countdown_prefix} ${days} ${unit} ${hours} ${unitH} ${mins} ${unitM} ${dict.countdown_suffix}`;
          }
        };

        tick();
        setInterval(tick, 60 * 1000);
      }

      // Reveal animation
      function initReveal(){
        const els = $$('[data-reveal]');
        if (!els.length) return;
        const io = new IntersectionObserver((entries) => {
          for (const en of entries) {
            if (en.isIntersecting) {
              en.target.classList.add('is-in');
              io.unobserve(en.target);
            }
          }
        }, { threshold: 0.12 });
        els.forEach(el => { el.classList.add('reveal'); io.observe(el); });
      }

      // FIX: admin-only controls can be enabled via ?admin=1 (keeps public UI clean)
      function initAdminMode(){
        const params = new URLSearchParams(location.search);
        const isAdmin = (params.get('admin') === '1') || (localStorage.getItem('admin') === '1');
        if (!isAdmin) return;
        document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('hidden'));
      }

      // IMPROVE: update donation milestones (no icons) based on current progress percent
      function setMilestones(pct){
        const marks = [
          { id: '#ms25', v: 25 },
          { id: '#ms50', v: 50 },
          { id: '#ms75', v: 75 },
          { id: '#ms100', v: 100 }
        ];
        marks.forEach(m => {
          const el = $(m.id);
          if (!el) return;
          el.classList.toggle('on', pct >= m.v);
        });
      }

      function initMilestonesObserver(){
        const percentEl = $('#percentLabel');
        if (!percentEl) return;
        const readPct = () => {
          const raw = String(percentEl.textContent || '').replace(/[^0-9.]/g,'');
          const pct = Math.max(0, Math.min(100, parseFloat(raw || '0')));
          setMilestones(pct);
        };
        readPct();
        const mo = new MutationObserver(readPct);
        mo.observe(percentEl, { characterData: true, childList: true, subtree: true });
      }

      // IMPROVE: social proof scaffolding (hidden unless you add REAL testimonials)
      // FIX: keep empty by default to avoid publishing placeholder claims.
      const TESTIMONIALS = [
        // {
        //   text: "...",
        //   name: "Nama Donatur",
        //   meta: "Kota / Tahun"
        // }
      ];

      function renderTestimonials(lang){
        const section = $('#testiSection');
        const grid = $('#testiGrid');
        if (!section || !grid) return;

        if (!TESTIMONIALS.length){
          section.classList.add('hidden');
          grid.innerHTML = '';
          return;
        }

        section.classList.remove('hidden');
        grid.innerHTML = TESTIMONIALS.slice(0, 6).map(t => {
          const safeText = String(t.text || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
          const safeName = String(t.name || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
          const safeMeta = String(t.meta || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
          return `
            <div class="rounded-[18px] border border-slate-200 bg-fig-soft p-4">
              <div class="text-sm text-slate-700 leading-relaxed">“${safeText}”</div>
              <div class="mt-3 text-xs text-slate-600">
                <div class="font-semibold">${safeName}</div>
                ${safeMeta ? `<div>${safeMeta}</div>` : ``}
              </div>
            </div>
          `;
        }).join('');
      }

      // Init language
      const initialLang = (localStorage.getItem('lang') || 'id');
      $$('[data-langbtn]').forEach(btn => {
        btn.addEventListener('click', () => applyLang(btn.getAttribute('data-langbtn')));
      });

      initReveal();
      initAdminMode();
      initMilestonesObserver();
      applyLang(['id','en','ja'].includes(initialLang) ? initialLang : 'id');
    })();
  </script>

  <!-- APP (existing logic: CSV, tabs, sholat, donation) -->
  <script type="module" src="./app.js"></script>
</body>
</html>
